<h1 id="-django-json-api-">Разработка Django JSON API для запуска на реальном рабочем сервере</h1>
<h2 id="-">Об авторе</h2>
<p>Позвольте мне представиться.</p>
<p>Меня зовут James Brewer. Последние несколько лет я работал инженером-программистом в Силиконовой долине, где создавал корпоративные веб-приложения с нуля, работал в команде, создавая и улучшая потребительские продукты, которые ежемесячно используют миллионов пользователей, а в настоящее время я организовываю собственную компанию по разработке программного обеспечения.</p>
<p>Кроме этого учебного пособия, я уже писал для сайта Thinkster материалы, которые пользовались успехом у пользователей. Я был первым автором на сайте, присоединившимся к основателям Thinkster, и написанные мной курсы помогли более 100 000 читателей улучшить свои навыки Django разработчиков.</p>
<p>Я работаю с Django так долго, что уже не могу сказать точную дату начала работы и работал над таким количеством проектов, что уже не смогу сосчитать. Я внес свой вклад в Django документацию и благодаря своей предыдущей работе с Thinkster ответил на гораздо больше вопросов о Django, чем мог бы подумать, будут заданы.</p>
<h2 id="-">Цель этого курса</h2>
<p>Наша цель при написании этого учебного пособия - преодолеть разрыв между учебными проектами и реальными приложениями, готовыми к запуску на рабочем сервере. Для этого мы спроектировали API, которое будет служить основой для минимально жизнеспособного прототипа готового продукта. В этом курсе Вы пройдете через все стадии самостоятельного создания такого API.</p>
<p>Мы не ставили перед собой цель сделать это приложение масштабируемым. На данный момент эта цель не является важной и будет только замедлять разработку. Вместо этого мы сосредоточились на разработке того, что позволило бы осуществить нашу цель, следуя простому принципу: принимать правильные решения. Мы активно избегаем вещей, которые по нашему мнению являются плохими и часто совершаем компромиссы, балансируя между выполнением задачи и правильностью решений, принятых для её завершения. Лучше сделать что-то, чем продолжать доводить до совершенства.</p>
<blockquote>
<p>Замечание: Если Вы заинтересованы в более продвинутом курсе, охватывающем такие темы как масштабирование, развертывание и т. д., напишите нам об этом в Slack канале <a href="https://thinkster.io/tutorials/django-json-api#">Thinkster Pro</a>.</p>
</blockquote>
<h2 id="-">Конечный результат</h2>
<p>API, которое мы будем создавать вместе с Вами, будет уметь выполнять следующее:</p>
<h2 id="-">Аутентификация пользователей</h2>
<p>Что хорошего в веб-приложении, в которое пользователь не может даже войти в систему? Мы рассмотрим регистрацию и вход в систему в этом разделе. Мы также заменим стандартную Django аутентификацию, основанную на сессиях, на аутентификацию с использованием [JSON Web токенов] (<a href="https://jwt.io/">https://jwt.io/</a>). Мы введём понятие авторизации (или прав доступа) и сделаем так, что только зарегистрированный пользователь сможет редактировать информацию в своём профиле.</p>
<p>Это будет самый длинный раздел, поскольку в нём вводится много понятий.</p>
<h2 id="-">Работа с профилем пользователя</h2>
<p>После того как мы закроем вопрос, связанный с безопасностью, нам потребуется способ, позволяющий сохранять информацию о каждом пользователе, которая не связана с аутентификацией. Например, биография, аватар пользователя и т.д.</p>
<p>Для этого мы будем использовать профили пользователей и начнём экспериментировать со связями в Django, создав связь один-к-одному между классами пользователь и профиль. Это означает, что у каждого пользователя будет только один объект <code>Profile</code>, который будет создаваться автоматически при регистрации учетной записи.</p>
<h2 id="-">Создание статей</h2>
<p>Наше новое веб-приложение не было бы таким замечательным, если бы в нём можно было только зарегистрироваться и войти в систему. Чтобы показать, что мы можем что-то ещё, введём понятие статьи. Статьи могут быть опубликованы любым пользователем для других пользователей, которые могут её прочитать, добавить в избранное и оставить комментарий к ней. Считайте это приложение блогом, где каждый может опубликовать новый материал.</p>
<h2 id="-">Комментарии к статьям</h2>
<p>&quot;Быть у всех на слуху&quot; очень важно в наши дни. Чтобы сделать наш сайт таким, мы сделаем так, чтобы пользователи могли комментировать статьи, которые мы только что создали. Наше приложение будет таким же как Reddit!</p>
<h2 id="-">Подписки</h2>
<p>Продолжая наше обсуждение, связанное с созданием связей между объектами, у пользователей должна быть возможность следовать друг за другом. Мы собираемся ввести понятие однонаправленных связей &quot;много-ко-многим&quot;. Подумайте об этом отношении на примере сравнения Twitter и Facebook. На Facebook, если мы друзья, то это означает, что я твой друг, а ты мой. Сравните это отношение с тем, что существует в Twitter. Если Вы подписаны на меня, я могу быть подписан на Вас, но необязательно. Мы будем использовать подход из Twitter, поскольку он больше подходит для нашего приложения.</p>
<h2 id="-">Добавление в избранное</h2>
<p>Возможность добавлять статью в избранное хороша по двум причинам. Во-первых, Вы льстите самолюбию автора. Во-вторых, такая возможность имитирует Вашу собственную систему закладок. Когда пользователь добавляет статью в избранное, мы создаём связь между ними. Затем, если пользователь ищет недавно прочитанную статью, которую ему понравилась, то он может легко найти её в своём списке избранных статей, а не прокручивать назад блок в её поисках.</p>
<h2 id="-">Добавление облака тегов</h2>
<p>Один из наиболее сложных вопросов, на которые надо ответить, при создании платформы с контентом, подобной создаваемой нами, - &quot;Как пользователи будут находить интересующий их контент?&quot;. На него тяжело ответить, потому что существует много вариантов. С одной стороны, Вы можете использовать машинное обучение, которое позволит выяснить что нравится каждому пользователю и рекомендовать контент пользователю, основываясь на этом знании. С другой стороны, Вы можете использовать простую систему тегов, которая переложит всю тяжелую работу по назначению тегов на плечи пользователя при публикации статей.</p>
<p>Поскольку мы просто хотим создать минимально жизнеспособный прототип, будем использовать последний подход. Мы не будем использовать машинное обучение, пока не подымем наш раунд финансирования серии C и не сможем потратить десятки миллионов долларов для решения проблемы!</p>
<h2 id="-">Пагинация</h2>
<p>По мере развития нашего сайта и роста его популярности, наша библиотека с контентом станет огромной. Загрузка и отображение 10000 статей за 1 запрос к API - это плохая идея по соображениям производительности. Чтобы решить эту проблему, нам придётся разбить эти 10000 статей на множество более мелких запросов. Для этого будет использоваться пагинация.</p>
<p>Пагинация позволяет нам извлекать по 20 статей за раз вместо получения сразу всех статей из базы данных. Django REST фреймворк обладает определенным набором инструментов, которые позволяют облегчить эту задачу.</p>
<h2 id="-">Фильтрация</h2>
<p>Мы также реализуем фильтрацию статей по нескольким параметрам: по автору, по тегу и по пользователю, который добавил статью в избранное. Это даёт пользователям ещё одну возможность найти статьи, которые их интересуют. Возможно сейчас Вы стали замечать определенную тенденцию. Цель API - поддерживать фронтэнд, что позволяет приятно впечатлить пользователей, использующих приложение.</p>
<h2 id="django-django-rest-">Django и пособие для начинающих по Django REST фремворку</h2>
<p>Мы предполагаем, что у Вас уже есть некоторый опыт работы с Django и Django REST фреймворком. В курсе будет использоваться много базовых концепций и объяснение каждого нового понятия с нуля может принести больше вреда, чем пользы.</p>
<blockquote>
<p><a href="https://docs.djangoproject.com/en/1.11/intro/tutorial01/">Вводный курс по Django</a> охватывает основы Django и даст Вам достаточно знаний для того, чтобы Вы смогли справиться с этим курсом.</p>
</blockquote>
<p>Если Вы хотите глубже изучить Django, Вам стоит начать со следующих источников - <a href="https://docs.djangoproject.com/en/1.11/ref/">ссылки на API</a> и <a href="https://docs.djangoproject.com/en/1.11/topics/">тематические руководства</a>. Вы должны быть знакомы с материалом, указанным в обеих ссылках, если планируете использовать Django для разработки реальных приложений.</p>
<p>У <a href="http://www.django-rest-framework.org/tutorial/1-serialization/">Django REST фреймворка</a> также есть своё пособие, которое охватывает большую часть того, что может предложить библиотека.</p>
<h2 id="-">Давайте начнем</h2>
<p>Это все что Вам пока нужно знать. Теперь склонируйте репозиторий <a href="https://github.com/brwr/conduit-django">conduit-django</a> и выполните указания, приведенные в файле <code>README.md</code>, чтобы установить всё необходимое для начала работы.</p>
