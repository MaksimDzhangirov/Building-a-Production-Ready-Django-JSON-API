# Настраиваем аутентификацию пользователей с помощью JWT

В состав Django входит система аутентификации на базе сессий, которая работает "из коробки". В неё входят все модели, представления и шаблоны, необходимые для входа пользователей в систему и создания новых учётных записей. Но существует проблема: эта аутентификация Django работает только при использовании стандартного HTML цикла - запрос/ответ.

Что мы подразумеваем под "стандартным HTML циклом запрос/ответ"? ОБычно, когда пользователь хочет осуществить какое-либо действие (например, создать новую учётную запись), он заполняет форму в своём веб браузере. Когда он нажимает кнопку "Отправить", браузер деалет запрос (который включает данные введенные пользователем в регистрацию форму) к серверу, сервер обрабатывает этот запрос и отвечает HTML кодом или перенаправляет браузер на новую страницу. Это то, что мы имеем ввиду, когда говорим о "полном обновлении страницы".

Почему важно знать, что встроенная аутентификация Django работает только со стандартным HTML циклом запрос/ответ? Потому что клиентское приложение, для которого мы создаём это API, не использует этот цикл. Вместо этого, клиентское приложение ожидает, что сервер вернет JSON вместо HTML. Возвращая JSON, мы позволяем клиентскому приложению, а не серверу, решать, что делать дальше. При использовании JSON цикла запрос/ответ, сервер принимает данные, обрабатывает их и возвращает ответ (как и в случае HTML цикла запрос/ответ), но ответ больше не управляет поведением браузера. Он просто сообщает нам результат выполнения запроса.

К счастью, команда, разрабатывающая Django, поняла, что тенденция веб разработки двигается в этом направлении. Они также учли, что некоторые проекты могут не захотеть использовать встроенные модели, представления и шаблоны. Вместо этого они могут захотеть использовать свои версии. Чтобы все усилия потраченные на разработку встроенной систему аутентификации Django не были потрачены впустую, они решили позволять использовать наиболее важные её части, при этом оставляя возможность настраивать конечный результат.

Мы более подробно рассмотрим этот вопрос позднее в этом разделе. Пока что, Вам необходимо знать, что:

1. Мы создадим свю собственную модель `User` вместо той, что используется в Django по умолчанию.
2. Нам нужно будет создать свои собственные представления, позволяющие возвращать JSON вместо HTML.
3. Поскольку мы не будем использовать HTML, нам не будут нужны стандартные Django шаблоны для входа в систему и регистрации.

Возможно Вы задаётесь вопросом - "Неужели придется писать систему аутентификации с нуля"? Для ответа не него вспомните то, о чём мы говорили раньше - Django позволяет использовать основные части аутентификации без использования стандартной системы аутентификации.

> Прочитайте раздел [Использование системы аутентификации Django](https://docs.djangoproject.com/es/1.11/topics/auth/default/) из документации Django, чтобы узнать больше о том как работает стандартная аутентификация Django.
> Прочитайте раздел [Модификация аутентификации в Django](https://docs.djangoproject.com/es/1.9/topics/auth/customizing/), чтобы лучше понять, что будет происходить в оставшейся части этой главы. Мы будем использовать информацию из этого раздела позднее.

## Авторизация с использованием сессий

## Авторизация с использованием токенов

### Проверяем токены

## JSON веб токены

## Почему JSON веб токены лучше, чем обычные токены

## Создаём модель User (Пользователь)

## Задаём параметр AUTH_USER_MODEL

## Создаём и запускаем миграции

## Наш первый пользователь

## Регистрируем новых пользователей

### RegistrationSerializer 

### RegistrationAPIView

## Регистрируем пользоваталей с помощью Postman

## Отображаем объекты User

## Реализация входа пользователей в систему

## LoginSerializer

## LoginAPIView

## Осуществляем вход пользователя в систему с помощью Postman

## Изменяем параметры EXCEPTION_HANDLER и NON_FIELD_ERRORS_KEY

## Обновляем UserJSONRenderer

## Получаем и обновляем информацию о пользователях

## UserSerializer

## UserRetrieveUpdateAPIView

## Аутентифицируем пользователей

## Сообщаем DRF о нашем бекэнде для аутентификации

## Осуществляем получение и обновление информации о пользователях с помощью Postman

## Переходим к более интересным темам

